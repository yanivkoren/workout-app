<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>אפליקציית אימונים — מסך פתיחה</title>

  <!-- Bootstrap CSS (גרסה מותאמת ל־RTL) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css"
    rel="stylesheet"
    crossorigin="anonymous"
  >

  <!-- Axios (ספרייה לתקשורת HTTP) -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <!-- הגדרות Supabase -->
  <script src="config.js"></script>

  <!-- פונקציות עזר כלליות -->
  <script src="common.js"></script>

  <!-- Bootstrap JS (כולל Popper לרכיבי UI אינטראקטיביים) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"
  ></script>
</head>

<body class="container py-4">

  <h1 class="mb-4">מסך פתיחה — אימונים</h1>

  <!-- סינון וחיפוש -->
  <form id="filtersForm" class="mb-4">
    <fieldset class="mb-3">
      <legend>סינון</legend>

      <div class="form-check mb-2">
        <input type="checkbox" id="onlyUndated" class="form-check-input" checked />
        <label for="onlyUndated" class="form-check-label">הצג רק אימונים ללא תאריך</label>
      </div>

      <div class="mb-2">
        <label for="typeSelect" class="form-label">סוג אימון:</label>
        <select id="typeSelect" class="form-select w-auto d-inline-block">
          <option value="">כל הסוגים</option>
          <option>אימון אירובי</option>
          <option>אימון כח</option>
          <option>אימון ליבה</option>
          <option>אימון שיווי משקל</option>
          <option>אימון מתיחות</option>
        </select>
      </div>

      <div class="mb-2">
        <label for="dateFrom" class="form-label">מתאריך:</label>
        <input type="date" id="dateFrom" class="form-control d-inline-block w-auto" />
        <label for="dateTo" class="form-label ms-2">עד תאריך:</label>
        <input type="date" id="dateTo" class="form-control d-inline-block w-auto" />
      </div>

      <div class="mb-2">
        <label for="searchName" class="form-label">חיפוש בשם אימון:</label>
        <input type="text" id="searchName" class="form-control w-auto d-inline-block" placeholder="הקלד חלק משם האימון" />
      </div>
    </fieldset>

    <fieldset class="mb-3">
      <legend>מיון</legend>
      <label for="sortField">מיין לפי:</label>
      <select id="sortField" class="form-select w-auto d-inline-block">
        <option value="id">מזהה אימון</option>
        <option value="workout_date">תאריך אימון</option>
        <option value="type">סוג אימון</option>
      </select>

      <label for="sortDir" class="ms-2">סדר:</label>
      <select id="sortDir" class="form-select w-auto d-inline-block">
        <option value="asc">עולה</option>
        <option value="desc">יורד</option>
      </select>
    </fieldset>

    <div class="mb-4">
      <button type="submit" class="btn btn-primary">סנן / חפש</button>
      <button type="button" id="resetBtn" class="btn btn-secondary">נקה</button>
      <button type="button" id="newWorkoutBtn" class="btn btn-success">אימון חדש</button>
    </div>
  </form>

  <!-- תוצאות -->
  <div id="summary" class="mb-3 fw-bold">נמצאו 0 אימונים.</div>

  <table id="resultsTable" class="table table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>מזהה</th>
        <th>שם אימון</th>
        <th>סוג</th>
        <th>תאריך</th>
        <th>פעולות</th>
      </tr>
    </thead>
    <tbody id="resultsBody">
      <!-- יאוכלס דינמית -->
    </tbody>
  </table>

  <pre id="log" hidden class="text-danger mt-3"></pre>

  <!-- הסקריפט הראשי למסך הפתיחה -->
  <script src="main.js"></script>

</body>
</html>
