<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>אפליקציית אימונים — מסך פתיחה</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

  <!-- Axios -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <!-- הגדרות Supabase משותפות לכל המסכים -->
  <script src="./config.js"></script>
</head>
<body class="container py-4">

  <h1 class="h3 mb-4">אפליקציית אימונים — מסך פתיחה</h1>

  <!-- סינון וחיפוש -->
  <form id="filtersForm" class="mb-4">
    <fieldset class="mb-3">
      <legend class="h6">סינון</legend>

      <div class="form-check mb-2">
        <input type="checkbox" id="onlyUndated" class="form-check-input" checked>
        <label for="onlyUndated" class="form-check-label">
          הצג גם אימונים לא מתוזמנים (ברירת מחדל מסומן)
        </label>
      </div>

      <div class="mb-2">
        <label for="statusSelect" class="form-label">סטטוס אימון:</label>
        <select id="statusSelect" class="form-select w-auto d-inline-block">
          <option value="">כל הסטטוסים</option>
          <option value="מתוכנן">מתוכנן</option>
          <option value="בוצע">בוצע</option>
        </select>
      </div>

      <div class="mb-2">
        <label for="typeSelect" class="form-label">סוג אימון:</label>
        <select id="typeSelect" class="form-select w-auto d-inline-block">
          <option value="">כל הסוגים</option>
          <option>אימון אירובי</option>
          <option>אימון כח</option>
          <option>אימון ליבה</option>
          <option>אימון שיווי משקל</option>
          <option>אימון מתיחות</option>
        </select>
      </div>

      <div class="mb-2">
        <label for="dateFrom" class="form-label">מתאריך:</label>
        <input type="date" id="dateFrom" class="form-control d-inline-block w-auto">
        <label for="dateTo" class="form-label ms-2">עד תאריך:</label>
        <input type="date" id="dateTo" class="form-control d-inline-block w-auto">
      </div>

      <div class="mb-2">
        <label for="searchName" class="form-label">חיפוש בשם אימון:</label>
        <input type="text" id="searchName" class="form-control w-auto d-inline-block" placeholder="הקלד חלק משם האימון">
      </div>
    </fieldset>

    <fieldset class="mb-3">
      <legend class="h6">מיון</legend>
      <label for="sortField">מיין לפי:</label>
      <select id="sortField" class="form-select w-auto d-inline-block">
        <option value="id">מזהה אימון</option>
        <option value="workout_date">תאריך אימון</option>
        <option value="type">סוג אימון</option>
        <option value="state">סטטוס</option>
      </select>

      <label for="sortDir" class="ms-2">סדר:</label>
      <select id="sortDir" class="form-select w-auto d-inline-block">
        <option value="asc">עולה</option>
        <option value="desc">יורד</option>
      </select>
    </fieldset>

    <div class="mb-4">
      <button type="submit" class="btn btn-primary">סנן / חפש</button>
      <button type="button" id="resetBtn" class="btn btn-secondary">נקה</button>
      <button type="button" id="newWorkoutBtn" class="btn btn-success">אימון חדש</button>
    </div>
  </form>

  <!-- סיכום קצר של הסינון -->
  <div id="summary" class="mb-3 text-muted"></div>

  <!-- תוצאות -->
  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead>
        <tr>
          <th style="white-space:nowrap;">מזהה אימון</th>
          <th>שם אימון</th>
          <th>סוג אימון</th>
          <th>תאריך אימון</th>
          <th>סטטוס</th>
          <th style="width: 1%;">פעולות</th>
        </tr>
      </thead>
      <tbody id="resultsBody"></tbody>
    </table>
  </div>

  <!-- לוג/דיבאג -->
  <pre id="log" class="small text-muted"></pre>

  <script src="./main.js"></script>
</body>
</html>
